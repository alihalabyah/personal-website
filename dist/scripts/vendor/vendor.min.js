window.Modernizr=function(e,t,n){function r(e){b.cssText=e}function o(e,t){return r(S.join(e+";")+(t||""))}function a(e,t){return typeof e===t}function i(e,t){return!!~(""+e).indexOf(t)}function c(e,t){for(var r in e){var o=e[r];if(!i(o,"-")&&b[o]!==n)return"pfx"==t?o:!0}return!1}function u(e,t,r){for(var o in e){var i=t[e[o]];if(i!==n)return r===!1?e[o]:a(i,"function")?i.bind(r||t):i}return!1}function s(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+k.join(r+" ")+r).split(" ");return a(t,"string")||a(t,"undefined")?c(o,t):(o=(e+" "+T.join(r+" ")+r).split(" "),u(o,t,n))}function l(){p.input=function(n){for(var r=0,o=n.length;o>r;r++)j[n[r]]=!!(n[r]in E);return j.list&&(j.list=!(!t.createElement("datalist")||!e.HTMLDataListElement)),j}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(e){for(var r,o,a,i=0,c=e.length;c>i;i++)E.setAttribute("type",o=e[i]),r="text"!==E.type,r&&(E.value=x,E.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(o)&&E.style.WebkitAppearance!==n?(g.appendChild(E),a=t.defaultView,r=a.getComputedStyle&&"textfield"!==a.getComputedStyle(E,null).WebkitAppearance&&0!==E.offsetHeight,g.removeChild(E)):/^(search|tel)$/.test(o)||(r=/^(url|email)$/.test(o)?E.checkValidity&&E.checkValidity()===!1:E.value!=x)),P[e[i]]=!!r;return P}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var f,d,m="2.6.3",p={},h=!0,g=t.documentElement,v="modernizr",y=t.createElement(v),b=y.style,E=t.createElement("input"),x=":)",w={}.toString,S=" -webkit- -moz- -o- -ms- ".split(" "),C="Webkit Moz O ms",k=C.split(" "),T=C.toLowerCase().split(" "),N={svg:"http://www.w3.org/2000/svg"},M={},P={},j={},$=[],D=$.slice,F=function(e,n,r,o){var a,i,c,u,s=t.createElement("div"),l=t.body,f=l||t.createElement("body");if(parseInt(r,10))for(;r--;)c=t.createElement("div"),c.id=o?o[r]:v+(r+1),s.appendChild(c);return a=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),s.id=v,(l?s:f).innerHTML+=a,f.appendChild(s),l||(f.style.background="",f.style.overflow="hidden",u=g.style.overflow,g.style.overflow="hidden",g.appendChild(f)),i=n(s,e),l?s.parentNode.removeChild(s):(f.parentNode.removeChild(f),g.style.overflow=u),!!i},z=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t).matches;var r;return F("@media "+t+" { #"+v+" { position: absolute; } }",function(t){r="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),r},A=function(){function e(e,o){o=o||t.createElement(r[e]||"div"),e="on"+e;var i=e in o;return i||(o.setAttribute||(o=t.createElement("div")),o.setAttribute&&o.removeAttribute&&(o.setAttribute(e,""),i=a(o[e],"function"),a(o[e],"undefined")||(o[e]=n),o.removeAttribute(e))),o=null,i}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),L={}.hasOwnProperty;d=a(L,"undefined")||a(L.call,"undefined")?function(e,t){return t in e&&a(e.constructor.prototype[t],"undefined")}:function(e,t){return L.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=D.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};o.prototype=t.prototype;var a=new o,i=t.apply(a,n.concat(D.call(arguments)));return Object(i)===i?i:a}return t.apply(e,n.concat(D.call(arguments)))};return r}),M.flexbox=function(){return s("flexWrap")},M.flexboxlegacy=function(){return s("boxDirection")},M.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},M.canvastext=function(){return!(!p.canvas||!a(t.createElement("canvas").getContext("2d").fillText,"function"))},M.webgl=function(){return!!e.WebGLRenderingContext},M.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:F(["@media (",S.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},M.geolocation=function(){return"geolocation"in navigator},M.postmessage=function(){return!!e.postMessage},M.websqldatabase=function(){return!!e.openDatabase},M.indexedDB=function(){return!!s("indexedDB",e)},M.hashchange=function(){return A("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},M.history=function(){return!(!e.history||!history.pushState)},M.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},M.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},M.rgba=function(){return r("background-color:rgba(150,255,150,.5)"),i(b.backgroundColor,"rgba")},M.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),i(b.backgroundColor,"rgba")||i(b.backgroundColor,"hsla")},M.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(b.background)},M.backgroundsize=function(){return s("backgroundSize")},M.borderimage=function(){return s("borderImage")},M.borderradius=function(){return s("borderRadius")},M.boxshadow=function(){return s("boxShadow")},M.textshadow=function(){return""===t.createElement("div").style.textShadow},M.opacity=function(){return o("opacity:.55"),/^0.55$/.test(b.opacity)},M.cssanimations=function(){return s("animationName")},M.csscolumns=function(){return s("columnCount")},M.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return r((e+"-webkit- ".split(" ").join(t+e)+S.join(n+e)).slice(0,-e.length)),i(b.backgroundImage,"gradient")},M.cssreflections=function(){return s("boxReflect")},M.csstransforms=function(){return!!s("transform")},M.csstransforms3d=function(){var e=!!s("perspective");return e&&"webkitPerspective"in g.style&&F("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},M.csstransitions=function(){return s("transition")},M.fontface=function(){var e;return F('@font-face {font-family:"font";src:url("https://")}',function(n,r){var o=t.getElementById("smodernizr"),a=o.sheet||o.styleSheet,i=a?a.cssRules&&a.cssRules[0]?a.cssRules[0].cssText:a.cssText||"":"";e=/src/i.test(i)&&0===i.indexOf(r.split(" ")[0])}),e},M.generatedcontent=function(){var e;return F(["#",v,"{font:0/0 a}#",v,':after{content:"',x,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},M.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(r){}return n},M.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(r){}return n},M.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}},M.sessionstorage=function(){try{return sessionStorage.setItem(v,v),sessionStorage.removeItem(v),!0}catch(e){return!1}},M.webworkers=function(){return!!e.Worker},M.applicationcache=function(){return!!e.applicationCache},M.svg=function(){return!!t.createElementNS&&!!t.createElementNS(N.svg,"svg").createSVGRect},M.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==N.svg},M.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(w.call(t.createElementNS(N.svg,"animate")))},M.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(w.call(t.createElementNS(N.svg,"clipPath")))};for(var H in M)d(M,H)&&(f=H.toLowerCase(),p[f]=M[H](),$.push((p[f]?"":"no-")+f));return p.input||l(),p.addTest=function(e,t){if("object"==typeof e)for(var r in e)d(e,r)&&p.addTest(r,e[r]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof h&&h&&(g.className+=" "+(t?"":"no-")+e),p[e]=t}return p},r(""),y=E=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function o(e){var t=g[e[p]];return t||(t={},h++,e[p]=h,g[h]=t),t}function a(e,n,r){if(n||(n=t),l)return n.createElement(e);r||(r=o(n));var a;return a=r.cache[e]?r.cache[e].cloneNode():m.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),a.canHaveChildren&&!d.test(e)?r.frag.appendChild(a):a}function i(e,n){if(e||(e=t),l)return e.createDocumentFragment();n=n||o(e);for(var a=n.frag.cloneNode(),i=0,c=r(),u=c.length;u>i;i++)a.createElement(c[i]);return a}function c(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return v.shivMethods?a(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function u(e){e||(e=t);var r=o(e);return!v.shivCSS||s||r.hasCSS||(r.hasCSS=!!n(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),l||c(e,r),e}var s,l,f=e.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,m=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,p="_html5shiv",h=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",s="hidden"in e,l=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){s=!0,l=!0}}();var v={elements:f.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:f.shivCSS!==!1,supportsUnknownElements:l,shivMethods:f.shivMethods!==!1,type:"default",shivDocument:u,createElement:a,createDocumentFragment:i};e.html5=v,u(t)}(this,t),p._version=m,p._prefixes=S,p._domPrefixes=T,p._cssomPrefixes=k,p.mq=z,p.hasEvent=A,p.testProp=function(e){return c([e])},p.testAllProps=s,p.testStyles=F,p.prefixed=function(e,t,n){return t?s(e,t,n):s(e,"pfx")},g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+$.join(" "):""),p}(this,this.document);
!function(e){function t(t){var n=t||window.event,i=[].slice.call(arguments,1),l=0,s=0,o=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(l=n.wheelDelta/120),n.detail&&(l=-n.detail/3),o=l,void 0!==n.axis&&n.axis===n.HORIZONTAL_AXIS&&(o=0,s=-1*l),void 0!==n.wheelDeltaY&&(o=n.wheelDeltaY/120),void 0!==n.wheelDeltaX&&(s=-1*n.wheelDeltaX/120),i.unshift(t,l,s,o),(e.event.dispatch||e.event.handle).apply(this,i)}var n=["DOMMouseScroll","mousewheel"];if(e.event.fixHooks)for(var i=n.length;i;)e.event.fixHooks[n[--i]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery);
!function(e,n){function t(e,n){var t;if("string"==typeof e&&"string"==typeof n)return localStorage[e]=n,!0;if("object"==typeof e&&"undefined"==typeof n){for(t in e)e.hasOwnProperty(t)&&(localStorage[t]=e[t]);return!0}return!1}function r(e,n){var t,r;if(t=new Date,t.setTime(t.getTime()+31536e6),t="; expires="+t.toGMTString(),"string"==typeof e&&"string"==typeof n)return document.cookie=e+"="+n+t+"; path=/",!0;if("object"==typeof e&&"undefined"==typeof n){for(r in e)e.hasOwnProperty(r)&&(document.cookie=r+"="+e[r]+t+"; path=/");return!0}return!1}function i(e){return localStorage[e]}function o(e){var n,t,r;for(e+="=",n=document.cookie.split(";"),t=0;t<n.length;t++){for(r=n[t];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(e))return r.substring(e.length,r.length)}return null}function a(e){return delete localStorage[e]}function s(e){return r(e,"",-1)}function l(e,n){var t=[],r=e.length;if(n>r)return[e];for(var i=0;r>i;i+=n)t.push(e.substring(i,i+n));return t}function c(n){var t=n?[n]:[];e.extend(this,{size:function(){return t.length},pop:function(){if(0===t.length)return null;var e=t[t.length-1];return t=t.slice(0,t.length-1),e},push:function(e){return t=t.concat([e]),e},top:function(){return t.length>0?t[t.length-1]:null}})}function u(n,t){var r=!0;"string"==typeof n&&""!==n&&(n+="_");var i=e.Storage.get(n+"commands");i=i?new Function("return "+i+";")():[];var o=i.length-1;e.extend(this,{append:function(a){r&&i[i.length-1]!==a&&(i.push(a),t&&i.length>t&&(i=i.slice(-t)),o=i.length-1,e.Storage.set(n+"commands",e.json_stringify(i)))},data:function(){return i},reset:function(){o=i.length-1},last:function(){return i[length-1]},end:function(){return o===i.length-1},position:function(){return o},current:function(){return i[o]},next:function(){return o<i.length-1&&++o,-1!==o?i[o]:void 0},previous:function(){var e=o;return o>0&&--o,-1!==e?i[o]:void 0},clear:function(){i=[],this.purge()},enabled:function(){return r},enable:function(){r=!0},purge:function(){e.Storage.remove(n+"commands")},disable:function(){r=!1}})}function f(e){return e.replace(/([\^\$\[\]\(\)\+\*\.\|])/g,"\\$1")}function p(e,n){var t=e.split(/(\s+)/);return{name:t[0],args:n(t.slice(2).join("")),rest:e.replace(RegExp("^"+f(t[0])+" "),"")}}function h(n){var t=e('<div class="terminal"><span>&nbsp;</span></div>').appendTo("body"),r=t.find("span").width();return t.remove(),t=Math.floor(n.width()/r),m(n)&&(n=n.innerWidth()-n.width(),t-=Math.ceil((20-n/2)/(r-1))),t}function m(e){return e.get(0).scrollHeight>e.innerHeight()}e.omap=function(n,t){var r={};return e.each(n,function(e,i){r[e]=t.call(n,e,i)}),r};var g="undefined"!=typeof window.localStorage;e.extend({Storage:{set:g?t:r,get:g?i:o,remove:g?a:s}}),jQuery.fn.extend({everyTime:function(e,n,t,r,i){return this.each(function(){jQuery.timer.add(this,e,n,t,r,i)})},oneTime:function(e,n,t){return this.each(function(){jQuery.timer.add(this,e,n,t,1)})},stopTime:function(e,n){return this.each(function(){jQuery.timer.remove(this,e,n)})}}),jQuery.extend({timer:{guid:1,global:{},regex:/^([0-9]+)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(e){if(e===n||null===e)return null;var t=this.regex.exec(jQuery.trim(e.toString()));return t[2]?parseInt(t[1],10)*(this.powers[t[2]]||1):e},add:function(e,n,t,r,i,o){var a=0;if(jQuery.isFunction(t)&&(i||(i=r),r=t,t=n),n=jQuery.timer.timeParse(n),!("number"!=typeof n||isNaN(n)||0>=n)){i&&i.constructor!==Number&&(o=!!i,i=0),i=i||0,o=o||!1,e.$timers||(e.$timers={}),e.$timers[t]||(e.$timers[t]={}),r.$timerID=r.$timerID||this.guid++;var s=function(){o&&s.inProgress||(s.inProgress=!0,(++a>i&&0!==i||r.call(e,a)===!1)&&jQuery.timer.remove(e,t,r),s.inProgress=!1)};s.$timerID=r.$timerID,e.$timers[t][r.$timerID]||(e.$timers[t][r.$timerID]=window.setInterval(s,n)),this.global[t]||(this.global[t]=[]),this.global[t].push(e)}},remove:function(e,n,t){var r,i=e.$timers;if(i){if(n){if(i[n]){if(t)t.$timerID&&(window.clearInterval(i[n][t.$timerID]),delete i[n][t.$timerID]);else for(var o in i[n])i[n].hasOwnProperty(o)&&(window.clearInterval(i[n][o]),delete i[n][o]);for(r in i[n])if(i[n].hasOwnProperty(r))break;r||(r=null,delete i[n])}}else for(var a in i)i.hasOwnProperty(a)&&this.remove(e,a,t);for(r in i)if(i.hasOwnProperty(r))break;r||(e.$timers=null)}}}}),(jQuery.browser&&jQuery.browser.msie||/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase()))&&jQuery(window).one("unload",function(){var e,n=jQuery.timer.global;for(e in n)if(n.hasOwnProperty(e))for(var t=n[e],r=t.length;--r;)jQuery.timer.remove(t[r],e)}),function(e){if(String.prototype.split.toString().match(/\[native/)){var n,t=String.prototype.split,r=/()??/.exec("")[1]===e;return n=function(n,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return t.call(n,i,o);var a,s,l,c=[],u=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),f=0;for(i=RegExp(i.source,u+"g"),n+="",r||(a=RegExp("^"+i.source+"$(?!\\s)",u)),o=o===e?4294967295:o>>>0;(s=i.exec(n))&&(u=s.index+s[0].length,!(u>f&&(c.push(n.slice(f,s.index)),!r&&s.length>1&&s[0].replace(a,function(){for(var n=1;n<arguments.length-2;n++)arguments[n]===e&&(s[n]=e)}),s.length>1&&s.index<n.length&&Array.prototype.push.apply(c,s.slice(1)),l=s[0].length,f=u,c.length>=o)));)i.lastIndex===s.index&&i.lastIndex++;return f===n.length?(l||!i.test(""))&&c.push(""):c.push(n.slice(f)),c.length>o?c.slice(0,o):c},String.prototype.split=function(e,t){return n(this,e,t)},n}}(),e.json_stringify=function(t,r){var i,o="";switch(r=r===n?1:r,typeof t){case"function":o+=t;break;case"boolean":o+=t?"true":"false";break;case"object":if(null===t)o+="null";else if(t instanceof Array){o+="[";var a=t.length;for(i=0;a-1>i;++i)o+=e.json_stringify(t[i],r+1);o+=e.json_stringify(t[a-1],r+1)+"]"}else{o+="{";for(a in t)t.hasOwnProperty(a)&&(o+='"'+a+'":'+e.json_stringify(t[a],r+1));o+="}"}break;case"string":a=t;var s={"\\\\":"\\\\",'"':'\\"',"/":"\\/","\\n":"\\n","\\r":"\\r","\\t":"\\t"};for(i in s)s.hasOwnProperty(i)&&(a=a.replace(RegExp(i,"g"),s[i]));o+='"'+a+'"';break;case"number":o+=String(t)}return o+=r>1?",":"",1===r&&(o=o.replace(/,([\]}])/g,"$1")),o.replace(/([\[{]),/g,"$1")},e.fn.cmd=function(t){function r(){T.toggleClass("inverted")}function i(){d="(reverse-i-search)`"+w+"': ",z()}function o(e){var n,t=y.data(),r=t.length;if(e&&A>0&&(r-=A),w.length>0)for(e=w.length;e>0;e--){n=w.substring(0,e).replace(/([.*+{}\[\]?])/g,"\\$1"),n=RegExp(n);for(var o=r;o--;)if(n.test(t[o]))return A=t.length-o,k=0,f.set(t[o],!0),S(),void(w.length!==e&&(w=w.substring(0,e),i()))}w=""}function a(e){var n=e.substring(0,m-g);return e=e.substring(m-g),[n].concat(l(e,m))}function s(){h.focus(),f.oneTime(1,function(){f.insert(h.val()),h.blur().val("")})}function c(e){var r;if("function"==typeof t.keydown&&(r=t.keydown(e),r!==n))return r;if(C){if(38===e.which||80===e.which&&e.ctrlKey||($=!0),!b||35!==e.which&&36!==e.which&&37!==e.which&&38!==e.which&&39!==e.which&&40!==e.which&&13!==e.which&&27!==e.which){if(e.altKey)return 68===e.which?(f.set(x.slice(0,k)+x.slice(k).replace(/[^ ]+ |[^ ]+$/,""),!0),!1):!0;if(13===e.keyCode)y&&x&&(t.historyFilter&&t.historyFilter(x)||!t.historyFilter)&&y.append(x),e=x,y.reset(),f.set(""),t.commands&&t.commands(e),"function"==typeof d&&z();else if(8===e.which)b?(w=w.slice(0,-1),i()):""!==x&&k>0&&(x=x.slice(0,k-1)+x.slice(k,x.length),--k,S());else if(9!==e.which||e.ctrlKey||e.altKey){if(46===e.which)return""!==x&&k<x.length&&(x=x.slice(0,k)+x.slice(k+1,x.length),S()),!0;if(y&&38===e.which||80===e.which&&e.ctrlKey)$?(v=x,f.set(y.current())):f.set(y.previous()),$=!1;else if(y&&40===e.which||78===e.which&&e.ctrlKey)f.set(y.end()?v:y.next());else if(37===e.which||66===e.which&&e.ctrlKey)if(e.ctrlKey&&66!==e.which){for(r=k-1,e=0," "===x[r]&&--r;r>0;--r){if(" "===x[r]&&" "!==x[r+1]){e=r+1;break}if("\n"===x[r]&&"\n"!==x[r+1]){e=r;break}}f.position(e)}else k>0&&(--k,S());else if(82===e.which&&e.ctrlKey)b?o(!0):(F=d,i(),v=x,x="",S(),b=!0);else if(71==e.which&&e.ctrlKey)b&&(d=F,z(),x=v,S(),b=!1,w="");else if(39===e.which||70===e.which&&e.ctrlKey)e.ctrlKey&&70!==e.which?(" "===x[k]&&++k,e=x.slice(k).match(/\S[\n\s]{2,}|[\n\s]+\S?/),!e||e[0].match(/^\s+$/)?k=x.length:" "!==e[0][0]?k+=e.index+1:(k+=e.index+e[0].length-1," "!==e[0][e[0].length-1]&&--k),S()):k<x.length&&(++k,S());else{if(123===e.which)return!0;if(36===e.which)f.position(0);else if(35===e.which)f.position(x.length);else{if(e.shiftKey&&45==e.which)return s(),!0;if(!e.ctrlKey&&!e.metaKey)return!0;if(192===e.which)return!0;if(e.metaKey){if(82===e.which)return!0;if(76===e.which)return!0}if(e.shiftKey){if(84===e.which)return!0}else if(87===e.which){if(""!==x){e=x.slice(0,k),r=x.slice(k+1);var a=e.match(/([^ ]+ *$)/);k=e.length-a[0].length,x=e.slice(0,k)+r,S()}}else if(72===e.which)""!==x&&k>0&&(x=x.slice(0,--k),k<x.length-1&&(x+=x.slice(k)),S());else if(65===e.which)f.position(0);else if(69===e.which)f.position(x.length);else{if(88===e.which||67===e.which||84===e.which)return!0;if(86===e.which)return s(),!0;75===e.which?0===k?f.set(""):k!==x.length&&f.set(x.slice(0,k)):85===e.which&&(f.set(x.slice(k,x.length)),f.position(0))}}}}else f.insert("	")}else d=F,b=!1,A=null,w="",z(),27===e.which&&(x=""),S(),c.call(this,e);return!1}}var f=this,p=f.data("cmd");if(p)return p;f.addClass("cmd"),f.append('<span class="prompt"></span><span></span><span class="cursor">&nbsp;</span><span></span>');var h=e("<textarea/>").addClass("clipboard").appendTo(f);t.width&&f.width(t.width);var m,g,F,d,_,y,v,b=!1,w="",A=null,D=t.mask||!1,x="",k=0,C=t.enabled,j=t.historySize||60,T=f.find(".cursor"),S=function(n){function t(n,t){if(t===n.length)s.html(e.terminal.encode(n,!0)),T.html("&nbsp;"),c.html("");else if(0===t)s.html(""),T.html(e.terminal.encode(n.slice(0,1),!0)),c.html(e.terminal.encode(n.slice(1),!0));else{var r=e.terminal.encode(n.slice(0,t),!0);s.html(r),r=n.slice(t,t+1),T.html(" "===r?"&nbsp;":e.terminal.encode(r,!0)),c.html(t===n.length-1?"":e.terminal.encode(n.slice(t+1),!0))}}function r(n){return"<div>"+e.terminal.encode(n,!0)+"</div>"}function i(n){var t=c;e.each(n,function(n,i){t=e(r(i)).insertAfter(t).addClass("clear")})}function o(n){e.each(n,function(e,n){s.before(r(n))})}var s=T.prev(),c=T.next();return function(){var u,f,p=D?x.replace(/./g,"*"):x;if(n.find("div").remove(),s.html(""),p.length>m-g-1||p.match(/\n/)){var h,F=p.match(/\t/g),d=F?3*F.length:0;if(F&&(p=p.replace(/\t/g,"\x00\x00\x00\x00")),p.match(/\n/)){var _=p.split("\n");for(f=m-g-1,u=0;u<_.length-1;++u)_[u]+=" ";for(_[0].length>f?(h=[_[0].substring(0,f)],h=h.concat(l(_[0].substring(f),m))):h=[_[0]],u=1;u<_.length;++u)_[u].length>m?h=h.concat(l(_[u],m)):h.push(_[u])}else h=a(p);if(F&&(h=e.map(h,function(e){return e.replace(/\x00\x00\x00\x00/g,"	")})),f=h[0].length,0!==f||1!==h.length)if(f>k)t(h[0],k),i(h.slice(1));else if(k===f)s.before(r(h[0])),t(h[1],0),i(h.slice(2));else if(u=h.length,f>k)t(h[0],k),i(h.slice(1));else if(k===f)s.before(r(h[0])),t(h[1],0),i(h.slice(2));else{F=h.slice(-1)[0],_=p.length-k;var y=F.length;if(p=0,y>=_)o(h.slice(0,-1)),t(F,(y===_?0:y-_)+d);else if(3===u)s.before("<div>"+e.terminal.encode(h[0],!0)+"</div>"),t(h[1],k-f-1),c.after('<div class="clear">'+e.terminal.encode(h[2],!0)+"</div>");else{for(p=k,u=0;u<h.length&&(f=h[u].length,p>f);++u)p-=f;f=h[u],d=u,p===f.length&&(p=0,f=h[++d]),t(f,p),o(h.slice(0,d)),i(h.slice(d+1))}}}else""===p?(s.html(""),T.html("&nbsp;"),c.html("")):t(p,k)}}(f),z=function(){function n(n){g=e("<div>"+e.terminal.strip(n)+"</div>").text().length,t.html(e.terminal.format(e.terminal.encode(n)))}var t=f.find(".prompt");return function(){switch(typeof d){case"string":n(d);break;case"function":d(n)}}}(),$=!0,E=[];return e.extend(f,{name:function(e){return e!==n?(_=e,y=new u(e,j),(e=E.length)&&!E[e-1].enabled()&&y.disable(),E.push(y),f):_},purge:function(){for(var e=E.length;e--;)E[e].purge();return E=[],f},history:function(){return y},set:function(e,r){return e!==n&&(x=e,r||(k=x.length),S(),"function"==typeof t.onCommandChange&&t.onCommandChange(x)),f},insert:function(e,n){return k===x.length?x+=e:x=0===k?e+x:x.slice(0,k)+e+x.slice(k),n||(k+=e.length),S(),"function"==typeof t.onCommandChange&&t.onCommandChange(x),f},get:function(){return x},commands:function(e){return e?(t.commands=e,f):e},destroy:function(){return e(document.documentElement||window).unbind(".cmd"),f.stopTime("blink",r),f.find(".cursor").next().remove().end().prev().remove().end().remove(),f.find(".prompt, .clipboard").remove(),f.removeClass("cmd").removeData("cmd"),f},prompt:function(e){if(e===n)return d;if("string"!=typeof e&&"function"!=typeof e)throw"prompt must be a function or string";return d=e,z(),S(),f},position:function(e){return"number"==typeof e?(k=0>e?0:e>x.length?x.length:e,S(),f):k},visible:function(){var e=f.visible;return function(){e.apply(f,[]),S(),z()}}(),show:function(){var e=f.show;return function(){e.apply(f,[]),S(),z()}}(),resize:function(e){if(e)m=e;else{e=f.width();var n=T.innerWidth();m=Math.floor(e/n)}return S(),f},enable:function(){return C||(T.addClass("inverted"),f.everyTime(500,"blink",r),C=!0),f},isenabled:function(){return C},disable:function(){return C&&(f.stopTime("blink",r),T.removeClass("inverted"),C=!1),f},mask:function(e){return"boolean"==typeof e?(D=e,S(),f):D}}),f.name(t.name||t.prompt||""),d=t.prompt||"> ",z(),(t.enabled===n||t.enabled===!0)&&f.enable(),e(document.documentElement||window).bind("keypress.cmd",function(r){var a;if(r.ctrlKey&&99===r.which)return!0;if(b||"function"!=typeof t.keypress||(a=t.keypress(r)),a!==n&&!a)return a;if(C){if(e.inArray(r.which,[38,13,0,8])>-1&&123!==r.keyCode&&(38!==r.which||!r.shiftKey))return!1;if(!r.ctrlKey&&(!r.altKey||100!==r.which)||r.altKey)return b?(w+=String.fromCharCode(r.which),o(),i()):f.insert(String.fromCharCode(r.which)),!1}}).bind("keydown.cmd",c),f.data("cmd",f),f};var F=/(\[\[[gbiuso]*;[^;]*;[^\]]*\](?:[^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?)/,d=/\[\[([gbiuso]*);([^;]*);([^;\]]*);?([^;\]]*);?([^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/g,_=/\[\[([gbiuso]*;[^;\]]*;[^;\]]*(?:;|[^\]()]*);?[^\]]*)\]([^\]]*\\\][^\]]*|[^\]]*|[^\[]*\[[^\]]*)\]?/gi,y=/#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})/,v=/https?:\/\/(?:(?!&[^;]+;)[^\s:"'<>)])+/g,b=/((([^<>('")[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,})))/g,w=/('[^']*'|"(\\"|[^"])*"|\/(\\\/|[^\/])*\/|(\\ |[^ ])+|[\w-]+)/g,A=/(\[\[[gbiuso]*;[^;]*;[^\]]*\])/,D=/\[\[[gbiuso]*;[^;]*;[^\]]*\]?$/;e.terminal={split_equal:function(e,n){for(var t=!1,r=!1,i="",o=[],a=e.replace(_,function(e,n,t){return e=n.match(/;/g).length,"[["+n+(2==e?";;":3==e?";":"")+t.replace(/\\\]/g,"&#93;").replace(/\n/g,"\\n")+"]"+t+"]"}).split(/\n/g),s=0,l=a.length;l>s;++s)if(""===a[s])o.push("");else for(var c=a[s],u=0,f=0,p=0,h=c.length;h>p;++p){if("["===c[p]&&"["===c[p+1])t=!0;else if(t&&"]"===c[p])r=r?t=!1:!0;else if(t&&r||!t){if("&"===c[p]){var m=c.substring(p).match(/^(&[^;]+;)/);if(!m)throw"Unclosed html entity in line "+(s+1)+" at char "+(p+1);p+=m[1].length-2,p===h-1&&o.push(g+m[1]);continue}"]"===c[p]&&"\\"===c[p-1]?--f:++f}if(f===n||p===h-1){var g=c.substring(u,p+1);i&&(g=i+g,g.match("]")&&(i="")),u=p+1,f=0,(m=g.match(_))&&(m=m[m.length-1],"]"!==m[m.length-1]?(i=m.match(A)[1],g+="]"):g.match(D)&&(g=g.replace(D,""),i=m.match(A)[1])),o.push(g)}}return o},encode:function(e,n){return e=n?e.replace(/&(?![^=]+=)/g,"&amp;"):e.replace(/&(?!#[0-9]+;|[a-zA-Z]+;|[^= "]+=[^=])/g,"&amp;"),e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")},format:function(n,t){var r=e.extend({},{linksNoReferrer:!1},t||{});if("string"==typeof n){var i=n.split(F);return i&&i.length>1&&(n=e.map(i,function(e){return""===e?e:"["===e.substring(0,1)?e.replace(d,function(e,n,t,r,i,o,a){if(""===a)return"";a=a.replace(/\\]/g,"]"),e="",-1!==n.indexOf("b")&&(e+="font-weight:bold;");var s=[];return-1!==n.indexOf("u")&&s.push("underline"),-1!==n.indexOf("s")&&s.push("line-through"),-1!==n.indexOf("o")&&s.push("overline"),s.length&&(e+="text-decoration:"+s.join(" ")+";"),-1!==n.indexOf("i")&&(e+="font-style:italic;"),t.match(y)&&(e+="color:"+t+";",-1!==n.indexOf("g")&&(e+="text-shadow:0 0 5px "+t+";")),r.match(y)&&(e+="background-color:"+r),'<span style="'+e+'"'+(""!==i?' class="'+i+'"':"")+' data-text="'+(""===o?a:o.replace(/&#93;/g,"]")).replace('"',"&quote;")+'">'+a+"</span>"}):"<span>"+e+"</span>"}).join("")),e.map(n.split(/(<\/?span[^>]*>)/g),function(e){return e.match(/span/)?e:e.replace(v,function(e){var n=e.match(/\.$/);return e=e.replace(/\.$/,""),'<a target="_blank" '+(r.linksNoReferer?' rel="noreferrer" ':"")+'href="'+e+'">'+e+"</a>"+(n?".":"")}).replace(b,'<a href="mailto:$1">$1</a>')}).join("").replace(/<span><br\/?><\/span>/g,"<br/>")}return""},escape_brackets:function(e){return e.replace(/\[/g,"&#91;").replace(/\]/g,"&#93;")},strip:function(e){return e.replace(d,"$6")},active:function(){return S.front()},from_ntroff:function(e){return e.replace(/((?:_\x08.|.\x08_)+)/g,function(e){return"[[u;;]"+e.replace(/_x08|\x08_|_\u0008|\u0008_/g,"")+"]"}).replace(/((?:.\x08.)+)/g,function(e){return"[[b;#fff;]"+e.replace(/(.)(?:\x08|\u0008)(.)/g,function(e,n,t){return t})+"]"})},ansi_colors:{normal:{black:"#000",red:"#A00",green:"#008400",yellow:"#A50",blue:"#00A",magenta:"#A0A",cyan:"#0AA",white:"#AAA"},faited:{black:"#000",red:"#640000",green:"#006100",yellow:"#737300",blue:"#000087",magenta:"#650065",cyan:"#008787",white:"#818181"},bold:{black:"#000",red:"#F55",green:"#44D544",yellow:"#FF5",blue:"#55F",magenta:"#F5F",cyan:"#5FF",white:"#FFF"},palette:["#000000","#AA0000","#00AA00","#AA5500","#0000AA","#AA00AA","#00AAAA","#AAAAAA","#555555","#FF5555","#55FF55","#FFFF55","#5555FF","#FF55FF","#55FFFF","#FFFFFF","#000000","#00005F","#000087","#0000AF","#0000D7","#0000FF","#005F00","#005F5F","#005F87","#005FAF","#005FD7","#005FFF","#008700","#00875F","#008787","#0087AF","#0087D7","#00AF00","#00AF5F","#00AF87","#00AFAF","#00AFD7","#00AFFF","#00D700","#00D75F","#00D787","#00D7AF","#00D7D7","#00D7FF","#00FF00","#00FF5F","#00FF87","#00FFAF","#00FFD7","#00FFFF","#5F0000","#5F005F","#5F0087","#5F00AF","#5F00D7","#5F00FF","#5F5F00","#5F5F5F","#5F5F87","#5F5FAF","#5F5FD7","#5F5FFF","#5F8700","#5F875F","#5F8787","#5F87AF","#5F87D7","#5F87FF","#5FAF00","#5FAF5F","#5FAF87","#5FAFAF","#5FAFD7","#5FAFFF","#5FD700","#5FD75F","#5FD787","#5FD7AF","#5FD7D7","#5FD7FF","#5FFF00","#5FFF5F","#5FFF87","#5FFFAF","#5FFFD7","#5FFFFF","#870000","#87005F","#870087","#8700AF","#8700D7","#8700FF","#875F00","#875F5F","#875F87","#875FAF","#875FD7","#875FFF","#878700","#87875F","#878787","#8787AF","#8787D7","#8787FF","#87AF00","#87AF5F","#87AF87","#87AFAF","#87AFD7","#87AFFF","#87D700","#87D75F","#87D787","#87D7AF","#87D7D7","#87D7FF","#87FF00","#87FF5F","#87FF87","#87FFAF","#87FFD7","#87FFFF","#AF0000","#AF005F","#AF0087","#AF00AF","#AF00D7","#AF00FF","#AF5F00","#AF5F5F","#AF5F87","#AF5FAF","#AF5FD7","#AF5FFF","#AF8700","#AF875F","#AF8787","#AF87AF","#AF87D7","#AF87FF","#AFAF00","#AFAF5F","#AFAF87","#AFAFAF","#AFAFD7","#AFAFFF","#AFD700","#AFD75F","#AFD787","#AFD7AF","#AFD7D7","#AFD7FF","#AFFF00","#AFFF5F","#AFFF87","#AFFFAF","#AFFFD7","#AFFFFF","#D70000","#D7005F","#D70087","#D700AF","#D700D7","#D700FF","#D75F00","#D75F5F","#D75F87","#D75FAF","#D75FD7","#D75FFF","#D78700","#D7875F","#D78787","#D787AF","#D787D7","#D787FF","#D7AF00","#D7AF5F","#D7AF87","#D7AFAF","#D7AFD7","#D7AFFF","#D7D700","#D7D75F","#D7D787","#D7D7AF","#D7D7D7","#D7D7FF","#D7FF00","#D7FF5F","#D7FF87","#D7FFAF","#D7FFD7","#D7FFFF","#FF0000","#FF005F","#FF0087","#FF00AF","#FF00D7","#FF00FF","#FF5F00","#FF5F5F","#FF5F87","#FF5FAF","#FF5FD7","#FF5FFF","#FF8700","#FF875F","#FF8787","#FF87AF","#FF87D7","#FF87FF","#FFAF00","#FFAF5F","#FFAF87","#FFAFAF","#FFAFD7","#FFAFFF","#FFD700","#FFD75F","#FFD787","#FFD7AF","#FFD7D7","#FFD7FF","#FFFF00","#FFFF5F","#FFFF87","#FFFFAF","#FFFFD7","#FFFFFF","#080808","#121212","#1C1C1C","#262626","#303030","#3A3A3A","#444444","#4E4E4E","#585858","#626262","#6C6C6C","#767676","#808080","#8A8A8A","#949494","#9E9E9E","#A8A8A8","#B2B2B2","#BCBCBC","#C6C6C6","#D0D0D0","#DADADA","#E4E4E4","#EEEEEE"]},from_ansi:function(){var n={30:"black",31:"red",32:"green",33:"yellow",34:"blue",35:"magenta",36:"cyan",37:"white",39:"white"},t={40:"black",41:"red",42:"green",43:"yellow",44:"blue",45:"magenta",46:"cyan",47:"white",49:"black"};return function(r){var i=r.split(/(\x1B\[[0-9;]*[A-Za-z])/g);if(1==i.length)return r;r=[],i.length>3&&"[0m"==i.slice(0,3).join("")&&(i=i.slice(3));for(var o,a,s,l,c=!1,u=0;u<i.length;++u)if(l=i[u].match(/^\x1B\[([0-9;]*)([A-Za-z])$/))switch(l[2]){case"m":if(""===l[1])continue;if("0"!==l[1]){var f=l[1].split(";"),p=void 0,h=s=!1,m=!1,g=[],F="",d="",_=!1,y=!1,v=!1,b=e.terminal.ansi_colors.palette,w=void 0;for(w in f){switch(p=parseInt(f[w],10)){case 1:g.push("b"),m=!0,s=!1;break;case 4:g.push("u");break;case 3:g.push("i");break;case 5:v=!0;break;case 38:_=!0;break;case 48:y=!0;break;case 2:s=!0,m=!1;break;case 7:h=!0;break;default:_&&v&&b[p-1]?F=b[p-1]:n[p]&&(F=n[p]),y&&v&&b[p-1]?d=b[p-1]:t[p]&&(d=t[p])}5!==p&&(v=!1)}h&&(F&&d?(f=d,d=F,F=f):(F="black",d="white")),f=void 0,p=void 0,f=p=m?e.terminal.ansi_colors.bold:s?e.terminal.ansi_colors.faited:e.terminal.ansi_colors.normal,s=[g.join(""),_?F:f[F],y?d:p[d]]}else s=["",""];c?(r.push("]"),"0"==l[1]?(c=!1,o=a=""):(s[1]=s[1]||o,s[2]=s[2]||a,r.push("[["+s.join(";")+"]"),s[1]&&(o=s[1]),s[2]&&(a=s[2]))):(c=!0,r.push("[["+s.join(";")+"]"),s[1]&&(o=s[1]),s[2]&&(a=s[2]))}else r.push(i[u]);return c&&r.push("]"),r.join("")}}(),parseArguments:function(n){return e.map(n.match(w)||[],function(e){return"'"===e[0]&&"'"===e[e.length-1]?e.replace(/^'|'$/g,""):'"'===e[0]&&'"'===e[e.length-1]?(e=e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"),e.replace(/\\\\|\\t|\\n/g,function(e){return"t"===e[1]?"	":"n"===e[1]?"\n":"\\"}).replace(/\\x([0-9a-f]+)/gi,function(e,n){return String.fromCharCode(parseInt(n,16))}).replace(/\\0([0-7]+)/g,function(e,n){return String.fromCharCode(parseInt(n,8))})):"/"===e[0]&&"/"==e[e.length-1]?RegExp(e.replace(/^\/|\/$/g,"")):e.match(/^-?[0-9]+$/)?parseInt(e,10):e.match(/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?$/)?parseFloat(e):e.replace(/\\ /g," ")})},splitArguments:function(n){return e.map(n.match(w)||[],function(e){return"'"===e[0]&&"'"===e[e.length-1]?e.replace(/^'|'$/g,""):'"'===e[0]&&'"'===e[e.length-1]?e.replace(/^"|"$/g,"").replace(/\\([" ])/g,"$1"):"/"===e[0]&&"/"==e[e.length-1]?e:e.replace(/\\ /g," ")})},parseCommand:function(n){return p(n,e.terminal.parseArguments)},splitCommand:function(n){return p(n,e.terminal.splitArguments)},test:function(){function n(e,n){t.echo(n+" &#91;"+(e?"[[b;#44D544;]PASS]":"[[b;#FF5555;]FAIL]")+"&#93;")}var t=e.terminal.active();t||(t=e("body").terminal(e.noop).css("margin",0),t.outerHeight(),t.height(),e(window).resize(function(){t.css("height",e(window).height()-20)}).resize()),t.echo("Testing...");var r='name "foo bar" baz /^asd [x]/ str\\ str 10 1e10',i=e.terminal.splitCommand(r);n("name"===i.name&&"foo bar"===i.args[0]&&"baz"===i.args[1]&&"/^asd [x]/"===i.args[2]&&"str str"===i.args[3]&&"10"===i.args[4]&&"1e10"===i.args[5],"$.terminal.splitCommand"),i=e.terminal.parseCommand(r),n("name"===i.name&&"foo bar"===i.args[0]&&"baz"===i.args[1]&&"regexp"===e.type(i.args[2])&&"^asd [x]"===i.args[2].source&&"str str"===i.args[3]&&10===i.args[4]&&1e10===i.args[5],"$.terminal.parseCommand"),n("[[;#640000;#008787]Foo][[biu;#44D544;#F5F]Bar][[;#000;#AAA]Baz]"===e.terminal.from_ansi("[2;31;46mFoo[1;3;4;32;45mBar[0m[7mBaz"),"$.terminal.from_ansi"),r="[[biugs;#fff;#000]Foo][[i;;;foo]Bar][[ous;;]Baz]",t.echo("$.terminal.format"),n('<span style="font-weight:bold;text-decoration:underline line-through;font-style:italic;color:#fff;text-shadow:0 0 5px #fff;background-color:#000" data-text="Foo">Foo</span><span style="font-style:italic;" class="foo" data-text="Bar">Bar</span><span style="text-decoration:underline line-through overline;" data-text="Baz">Baz</span>'===e.terminal.format(r),"	formatting"),n('<a target="_blank" href="http://terminal.jcubic.pl/examples.php">http://terminal.jcubic.pl/examples.php</a> <a target="_blank" href="https://www.google.com/?q=jquery%20terminal">https://www.google.com/?q=jquery%20terminal</a>'===e.terminal.format("http://terminal.jcubic.pl/examples.php https://www.google.com/?q=jquery%20terminal"),"	urls"),n('<a href="mailto:foo@bar.com">foo@bar.com</a> <a href="mailto:baz.quux@example.com">baz.quux@example.com</a>'===e.terminal.format("foo@bar.com baz.quux@example.com"),"	emails"),n("-_-Foo-_-Bar-_-Baz-_-"===e.terminal.strip("-_-[[biugs;#fff;#000]Foo]-_-[[i;;;foo]Bar]-_-[[ous;;]Baz]-_-"),"$.terminal.strip"),r="[[bui;#fff;]Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla sed dolor nisl, in suscipit justo. Donec a enim et est porttitor semper at vitae augue. Proin at nulla at dui mattis mattis. Nam a volutpat ante. Aliquam consequat dui eu sem convallis ullamcorper. Nulla suscipit, massa vitae suscipit ornare, tellus] est [[b;;#f00]consequat nunc, quis blandit elit odio eu arcu. Nam a urna nec nisl varius sodales. Mauris iaculis tincidunt orci id commodo. Aliquam] non magna quis [[i;;]tortor malesuada aliquam] eget ut lacus. Nam ut vestibulum est. Praesent volutpat tellus in eros dapibus elementum. Nam laoreet risus non nulla mollis ac luctus [[ub;#fff;]felis dapibus. Pellentesque mattis elementum augue non sollicitudin. Nullam lobortis fermentum elit ac mollis. Nam ac varius risus. Cras faucibus euismod nulla, ac auctor diam rutrum sit amet. Nulla vel odio erat], ac mattis enim.",t.echo("$.terminal.split_equal"),i=[10,40,60,400];for(var o=i.length;o--;){for(var a=e.terminal.split_equal(r,i[o]),s=!0,l=0;l<a.length;++l)if(e.terminal.strip(a[l]).length>i[o]){s=!1;break}n(s,"	split "+i[o])}}},e.fn.visible=function(){return this.css("visibility","visible")},e.fn.hidden=function(){return this.css("visibility","hidden")};var x=0;e.jrpc=function(n,t,r,i,o){return t=e.json_stringify({jsonrpc:"2.0",method:t,params:r,id:++x}),e.ajax({url:n,data:t,success:i,error:o,contentType:"application/json",dataType:"json",async:!0,cache:!1,type:"POST"})};var k=(g=!"0.7.12".match(/^\{\{/))?" version 0.7.12":" ",C=RegExp(" {"+k.length+"}$"),j=[["jQuery Terminal","(c) 2011-2013 jcubic"],["jQuery Terminal Emulator"+(g?" v. 0.7.12":""),"Copyright (c) 2011-2013 Jakub Jankiewicz <http://jcubic.pl>".replace(/ *<.*>/,"")],["jQuery Terminal Emulator"+(g?k:""),"Copyright (c) 2011-2013 Jakub Jankiewicz <http://jcubic.pl>".replace(/^Copyright /,"")],["      _______                 ________                        __","     / / _  /_ ____________ _/__  ___/______________  _____  / /"," __ / / // / // / _  / _/ // / / / _  / _/     / /  \\/ / _ \\/ /","/  / / // / // / ___/ // // / / / ___/ // / / / / /\\  / // / /__","\\___/____ \\\\__/____/_/ \\__ / /_/____/_//_/ /_/ /_/  \\/\\__\\_\\___/","         \\/          /____/                                   ".replace(C," ")+k,"Copyright (c) 2011-2013 Jakub Jankiewicz <http://jcubic.pl>"],["      __ _____                     ________                              __","     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /"," __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /","/  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__","\\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/","          \\/              /____/                                          ".replace(C,"")+k,"Copyright (c) 2011-2013 Jakub Jankiewicz <http://jcubic.pl>"]];e.terminal.defaults={prompt:"> ",history:!0,exit:!0,clear:!0,enabled:!0,historySize:60,checkArity:!0,displayExceptions:!0,cancelableAjax:!0,processArguments:!0,linksNoReferrer:!1,login:null,outputLimit:-1,tabcompletion:null,historyFilter:null,onInit:e.noop,onClear:e.noop,onBlur:e.noop,onFocus:e.noop,onTerminalChange:e.noop,onExit:e.noop,keypress:e.noop,keydown:e.noop};var T=[],S=new function(n){var t=n?[n]:[],r=0;e.extend(this,{get:function(){return t},rotate:function(){return 1===t.length?t[0]:(r===t.length-1?r=0:++r,t[r])},length:function(){return t.length},set:function(e){for(var n=t.length;n--;)if(t[n]===e)return void(r=n);this.append(e)},front:function(){return t[r]},append:function(e){t.push(e)}})};e.fn.terminal=function(t,r){function i(n){return"function"==typeof H.processArguments?p(n,H.processArguments):H.processArguments?e.terminal.parseCommand(n):e.terminal.splitCommand(n)}function o(n){B.echo("string"==typeof n?n:n instanceof Array?e.map(n,function(n){return e.json_stringify(n)}).join(" "):"object"==typeof n?e.json_stringify(n):n)}function a(n){var t=function(t,r){B.pause(),e.jrpc(n,t,r,function(e){e.error?B.error("&#91;RPC&#93; "+e.error.message):o(e.result),B.resume()},function(e,n){"abort"!==n&&B.error("&#91;AJAX&#93; "+n+" - Server reponse is: \n"+e.responseText),B.resume()})};return function(e,n){if(""!==e)if(e=i(e),H.login&&"help"!==e.name){var r=n.token();r?t(e.name,[r].concat(e.args)):n.error("&#91;AUTH&#93; Access denied (no token)")}else t(e.name,e.args)}}function s(t,r){return function(o,a){if(""!==o){o=i(o);var l=t[o.name],c=e.type(l);if("function"===c){if(!r||l.length===o.args.length)return l.apply(B,o.args);B.error("&#91;Arity&#93; wrong number of arguments. Function '"+o.name+"' expect "+l.length+" got "+o.args.length)}else if("object"===c||"string"===c){var u=[];if("object"===c){for(var f in l)l.hasOwnProperty(f)&&u.push(f);l=s(l,r)}a.push(l,{prompt:o.name+"> ",name:o.name,completion:"object"===c?function(e,n,t){t(u)}:n})}else a.error("Command '"+o.name+"' Not Found")}}}function l(n,t){t=t||e.noop;var r=e.type(n),i={};if("string"===r)B.pause(),e.jrpc(n,"system.describe",[],function(r){var l=[];if(r.procs){var c={};e.each(r.procs,function(t,r){l.push(r.name),c[r.name]=function(){var t=Array.prototype.slice.call(arguments);H.checkArity&&r.params&&r.params.length!==t.length?B.error("&#91;Arity&#93; wrong number of arguments.Function '"+r.name+"' expect "+r.params.length+" got "+t.length):(B.pause(),e.jrpc(n,r.name,t,function(e){e.error?B.error("&#91;RPC&#93; "+e.error.message):o(e.result),B.resume()},function(e,n){"abort"!==n&&B.error("&#91;AJAX&#93; "+n+" - Server reponse is: \n"+e.responseText),B.resume()}))}}),i.interpreter=s(c,!1),i.completion=function(e,n,t){t(l)}}else i.interpreter=a(n),i.completion=H.completion;B.resume(),t(i)},function(){i.completion=H.completion,i.interpreter=a(n),t(i)});else if("object"===r){var l,c=[];for(l in n)c.push(l);i.interpreter=s(n,!0),i.completion=function(e,n,t){t(c)},t(i)}else{if("undefined"===r)n=e.noop;else if("function"!==r)throw r+" is invalid interpreter value";t({interpreter:n,completion:H.completion})}}function u(e){return"string"==typeof e?e:"string"==typeof e.fileName?e.fileName+": "+e.message:e.message}function g(n,t){if(H.displayExceptions){var r=u(n);B.error("&#91;"+t+"&#93;: "+r),"string"==typeof n.fileName&&(B.pause(),e.get(n.fileName,function(e){B.resume();var t=n.lineNumber-1;(e=e.split("\n")[t])&&B.error("&#91;"+n.lineNumber+"&#93;: "+e)})),n.stack&&B.error(n.stack)}}function F(){var e=N.prop?N.prop("scrollHeight"):N.attr("scrollHeight");N.scrollTop(e)}function d(e,n){try{if("function"==typeof n)n(function(){});else if("string"!=typeof n)throw e+" must be string or function"}catch(t){return g(t,e.toUpperCase()),!1}return!0}function _(n,t){try{var r=e.extend({raw:!1,finalize:e.noop},t||{});n="function"===e.type(n)?n():n,n="string"===e.type(n)?n:String(n);var i,o;if(r.raw||(n=e.terminal.encode(n)),n=e.terminal.from_ntroff(n),n=e.terminal.from_ansi(n),$.push(E),!r.raw&&(n.length>R||n.match(/\n/))){var a=e.terminal.split_equal(n,R);for(i=0,o=a.length;o>i;++i)$.push(""===a[i]||"\r"===a[i]?"&nbsp":r.raw?a[i]:e.terminal.format(a[i],{linksNoReferer:H.linksNoReferer}))}else r.raw||(n=e.terminal.format(n,{linksNoReferer:H.linksNoReferer})),$.push(n);$.push(r.finalize)}catch(s){$=[],alert("Internal Exception(draw_line):"+u(s)+"\n"+s.stack)}}function y(){try{var n;if(H.outputLimit>=0){var t=B.rows(),r=0===H.outputLimit?t:H.outputLimit;
t=0;for(var i,o=e("<div/>"),a=$.length;a--;)if("function"==typeof $[a])i=$[a],n=e("<div/>");else if($[a]===E){n.prependTo(o);try{i(n)}catch(s){g(s,"USER:echo(finalize)")}}else if(n.prepend("<div>"+$[a]+"</div>"),++t===r){if($[a-1]!==E)try{i(n)}catch(l){g(l,"USER:echo(finalize)")}break}o.children().appendTo(K)}else e.each($,function(t,r){if(r===E)n=e("<div></div>");else if("function"==typeof r){n.appendTo(K);try{r(n)}catch(i){g(i,"USER:echo(finalize)")}}else e("<div/>").html(r).appendTo(n).width("100%")});F(),$=[]}catch(c){alert("flush "+u(c)+"\n"+c.stack)}}function v(){H.greetings===n?B.echo(B.signature):H.greetings&&B.echo(H.greetings)}function b(n){n=e.terminal.escape_brackets(e.terminal.encode(n,!0));var t=G.prompt();G.mask()&&(n=n.replace(/./g,"*")),"function"==typeof t?t(function(e){B.echo(e+n)}):B.echo(t+n)}function w(e,t){try{I=e;var r=X.top();if("exit"===e&&H.exit)1===X.size()?H.login?D():(t||b(e),B.echo("You can't exit from main interpeter")):B.pop("exit");else{t||b(e);var i=L.length-1;if("clear"===e&&H.clear)B.clear();else{var o=r.interpreter(e,B);o!==n&&(i===L.length-1?(L.pop(),o!==!1&&B.echo(o)):L=o===!1?L.slice(0,i).concat(L.slice(i+1)):L.slice(0,i).concat([o]).concat(L.slice(i+1)),B.resize())}}}catch(a){throw g(a,"USER"),B.resume(),a}}function A(){var n=null;G.prompt("login: "),H.history&&G.history().disable(),G.commands(function(t){try{if(b(t),n){if(G.mask(!1),B.pause(),"function"!=typeof H.login)throw"Value of login property must be a function";H.login(n,t,function(t){if(t){var r=H.name;r=(r?r+"_":"")+J+"_",e.Storage.set(r+"token",t),e.Storage.set(r+"login",n),G.commands(w),C()}else B.error("Wrong password try again"),G.prompt("login: "),n=null;B.resume()},B)}else n=t,G.prompt("password: "),G.mask(!0)}catch(r){throw g(r,"LOGIN",B),r}})}function D(){if("function"==typeof H.onBeforelogout)try{if(H.onBeforelogout(B)===!1)return}catch(n){throw g(n,"onBeforelogout"),n}var t=(H.name?H.name+"_":"")+J+"_";if(e.Storage.remove(t+"token"),e.Storage.remove(t+"login"),H.history&&G.history().disable(),A(),"function"==typeof H.onAfterlogout)try{H.onAfterlogout(B)}catch(r){throw g(r,"onAfterlogout"),r}}function x(n){var t=(H.name?H.name+"_":"")+J+"_interpreters",r=e.Storage.get(t);r=r?new Function("return "+r+";")():[],-1==e.inArray(n,r)&&(r.push(n),e.Storage.set(t,e.json_stringify(r)))}function k(){var e=X.top(),n=(H.name?H.name+"_":"")+J+(O.length?"_"+O.join("_"):"");x(n),G.name(n),G.prompt("function"==typeof e.prompt?function(n){e.prompt(n,B)}:e.prompt),G.set(""),"function"==typeof e.onStart&&e.onStart(B)}function C(){if(k(),H.history&&G.history().enable(),v(),"function"==typeof H.onInit)try{H.onInit(B)}catch(e){throw g(e,"OnInit"),e}}function z(t){var r,i;if(r=X.top(),"function"===e.type(r.keydown)&&(r=r.keydown(t,B),r!==n))return r;if(B.oneTime(10,function(){Z()}),"function"===e.type(H.keydown)&&(r=H.keydown(t,B),r!==n))return r;if(B.paused()){if(68===t.which&&t.ctrlKey){if(T.length){for(i=T.length;i--;)if(t=T[i],4!==t.readyState)try{t.abort()}catch(o){B.error("error in aborting ajax")}T=[],B.resume()}return!1}}else{if(9!==t.which&&(Q=0),68===t.which&&t.ctrlKey)return""===G.get()?X.size()>1||H.login!==n?B.pop(""):(B.resume(),B.echo("")):B.set_command(""),!1;if(H.tabcompletion&&9===t.which){++Q;var a=G.get().substring(0,G.position());t=a.split(" ");var s;if(1==t.length)s=t[0];else for(s=t[t.length-1],i=t.length-1;i>0&&"\\"==t[i-1][t[i-1].length-1];i--)s=t[i-1]+" "+s;var l=RegExp("^"+f(s));return X.top().completion(B,s,function(e){if(G.get().substring(0,G.position())===a){var n=[];for(i=e.length;i--;)l.test(e[i])&&n.push(e[i]);if(1===n.length)B.insert(n[0].replace(l,""));else if(n.length>1)if(Q>=2)b(a),B.echo(n.join("	")),Q=0;else{e=!1;var t=s.length;e:for(;t<n[0].length;++t){for(i=1;i<n.length;++i)if(n[0].charAt(t)!==n[i].charAt(t))break e;e=!0}e&&B.insert(n[0].slice(0,t).replace(l,""))}}}),!1}if(86===t.which&&t.ctrlKey)B.oneTime(1,function(){F()});else if(9===t.which&&t.ctrlKey){if(S.length()>1)return B.focus(!1),!1}else 34===t.which?B.scroll(B.height()):33===t.which?B.scroll(-B.height()):B.attr({scrollTop:B.attr("scrollHeight")})}}var $=[],E=1,B=this;if(this.length>1)return this.each(function(){e.fn.terminal.call(e(this),t,e.extend({name:B.selector},r))});if(B.data("terminal"))return B.data("terminal");if(0===B.length)throw'Sorry, but terminal said that "'+B.selector+'" is not valid selector!';var N,I,K,R,q,P,O=[],Q=0,L=[],J=S.length(),M=[],H=e.extend({},e.terminal.defaults,{name:B.selector},r||{}),U=!H.enabled;e.extend(B,e.omap({clear:function(){K.html(""),G.set(""),L=[];try{H.onClear(B)}catch(e){throw g(e,"onClear"),e}return B.attr({scrollTop:0}),B},export_view:function(){return{prompt:B.get_prompt(),command:B.get_command(),position:G.position(),lines:L.slice(0)}},import_view:function(e){return B.set_prompt(e.prompt),B.set_command(e.command),G.position(e.position),L=e.lines,B.resize(),B},exec:function(e,n){return U?M.push([e,n]):w(e,n),B},commands:function(){return X.top().interpreter},greetings:function(){return v(),B},paused:function(){return U},pause:function(){return G&&(U=!0,B.disable(),G.hidden()),B},resume:function(){if(G){B.enable();var e=M;for(M=[];e.length;){var n=e.shift();B.exec.apply(B,n)}G.visible(),F()}return B},cols:function(){return R},rows:function(){var n=e('<div class="terminal"><span>&nbsp;</span></div>').appendTo("body"),t=Math.floor(B.height()/n.height());return n.remove(),t},history:function(){return G.history()},next:function(){if(1===S.length())return B;var n=B.offset().top;B.height(),B.scrollTop();var t=B,r=e(window).scrollTop(),i=r+e(window).height(),o=e(t).offset().top;if(o+e(t).height()>=r&&i>=o){S.front().disable(),n=S.rotate().enable(),t=n.offset().top-50,e("html,body").animate({scrollTop:t},500);try{H.onTerminalChange(n)}catch(a){throw g(a,"onTerminalChange"),a}return n}return B.enable(),e("html,body").animate({scrollTop:n-50},500),B},focus:function(e,n){return B.oneTime(1,function(){if(1===S.length())if(e===!1)try{!n&&H.onBlur(B)!==!1&&B.disable()}catch(t){throw g(t,"onBlur"),t}else try{!n&&H.onFocus(B)!==!1&&B.enable()}catch(r){throw g(r,"onFocus"),r}else if(e===!1)B.next();else{var i=S.front();if(i!=B&&(i.disable(),!n))try{H.onTerminalChange(B)}catch(o){throw g(o,"onTerminalChange"),o}S.set(B),B.enable()}}),B},enable:function(){return R===n&&B.resize(),U&&G&&(G.enable(),U=!1),B},disable:function(){return G&&(U=!0,G.disable()),B},enabled:function(){return U},signature:function(){var e=B.cols();return e=15>e?null:35>e?0:55>e?1:64>e?2:75>e?3:4,null!==e?j[e].join("\n")+"\n":""},version:function(){return"0.7.12"},get_command:function(){return G.get()},insert:function(e){if("string"==typeof e)return G.insert(e),B;throw"insert function argument is not a string"},set_prompt:function(e){return d("prompt",e)&&(G.prompt("function"==typeof e?function(n){e(n,B)}:e),X.top().prompt=e),B},get_prompt:function(){return X.top().prompt},set_command:function(e){return G.set(e),B},set_mask:function(e){return G.mask(e),B},get_output:function(n){return n?L:e.map(L,function(e){return"function"==typeof e[0]?e[0]():e[0]}).join("\n")},resize:function(n,t){n&&t&&(B.width(n),B.height(t)),n=B.width(),t=B.height();var r=h(B);return r!==R&&(R=r,G.resize(R),r=K.empty().detach(),e.each(L,function(e,n){_.apply(null,n)}),G.before(r),y(),"function"!=typeof H.onResize||P===t&&q===n||H.onResize(B),(P!==t||q!==n)&&(P=t,q=n)),B},flush:function(){y()},echo:function(n,t){try{n=n||"";var r=e.extend({flush:!0,raw:!1,finalize:e.noop},t||{});if($=[],_(n,r),r.flush&&y(),L.push([n,r]),r.outputLimit>=0){var i=0===r.outputLimit?B.rows():r.outputLimit,o=K.find("div div");o.length>i&&o.slice(0,L.length-i+1).remove()}Z()}catch(a){alert("terminal.echo "+u(a)+"\n"+a.stack)}return B},error:function(n,t){return B.echo("[[;#f00;]"+e.terminal.escape_brackets(n).replace(/\\$/,"&#92;")+"]",t)},scroll:function(e){var n;return e=Math.round(e),N.prop?(e>N.prop("scrollTop")&&e>0&&N.prop("scrollTop",0),n=N.prop("scrollTop")):(e>N.attr("scrollTop")&&e>0&&N.attr("scrollTop",0),n=N.attr("scrollTop")),N.scrollTop(n+e),B},logout:H.login?function(){for(;X.size()>1;)X.pop();return D(),B}:function(){throw"You don't have login function"},token:H.login?function(){var n=H.name;return e.Storage.get((n?n+"_":"")+J+"_token")}:e.noop,login_name:H.login?function(){var n=H.name;return e.Storage.get((n?n+"_":"")+J+"_login")}:e.noop,name:function(){return X.top().name},push:function(n,t){if(t&&(!t.prompt||d("prompt",t.prompt))||!t){t=t||{},t.name=t.name||I,t.prompt=t.prompt||t.name+" ",O.push(t.name);var r=X.top();r&&(r.mask=G.mask()),l(n,function(n){X.push(e.extend({},n,t)),k()})}return B},pop:function(t){if(t!==n&&b(t),O.pop(),X.top().name===H.name){if(H.login&&(D(),"function"===e.type(H.onExit)))try{H.onExit(B)}catch(r){throw g(r,"onExit"),r}}else{if(t=X.pop(),k(),"function"===e.type(t.onExit))try{t.onExit(B)}catch(i){throw g(i,"onExit"),i}B.set_mask(X.top().mask)}return B},level:function(){return X.size()},reset:function(){for(B.clear();X.size()>1;)X.pop();return C(),B},purge:function(){var n=(H.name?H.name+"_":"")+J+"_",t=e.Storage.get(n+"interpreters");return e.each(new Function("return "+t+";")(),function(n,t){e.Storage.remove(t+"_commands")}),e.Storage.remove(n+"interpreters"),e.Storage.remove(n+"token"),e.Storage.remove(n+"login"),B},destroy:function(){return G.destroy().remove(),K.remove(),e(document).unbind(".terminal"),e(window).unbind(".terminal"),B.unbind("click, mousewheel"),B.removeData("terminal").removeClass("terminal"),H.width&&B.css("width",""),H.height&&B.css("height",""),B}},function(e,n){return function(){try{return n.apply(this,Array.prototype.slice.apply(arguments))}catch(t){throw"exec"!==e&&g(t,"TERMINAL"),t}}}));var Z=function(){var e=m(B);return function(){e!==m(B)&&(B.resize(),e=m(B))}}();if(H.width&&B.width(H.width),H.height&&B.height(H.height),N=navigator.userAgent.toLowerCase().match(/(webkit)[ \/]([\w.]+)/)||"body"!=B[0].tagName.toLowerCase()?B:e("html"),e(document).bind("ajaxSend.terminal",function(e,n){T.push(n)}),K=e("<div>").addClass("terminal-output").appendTo(B),B.addClass("terminal"),("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(B.click(function(){B.find("textarea").focus()}),B.find("textarea").focus()),H.login&&"function"==typeof H.onBeforeLogin)try{H.onBeforeLogin(B)}catch(W){throw g(W,"onBeforeLogin"),W}if("string"!=typeof t||"string"!=typeof H.login&&!H.login||(H.login=function(n){return function(r,i,o){B.pause(),e.jrpc(t,n,[r,i],function(e){B.resume(),o(!e.error&&e.result?e.result:null)},function(e,n){B.resume(),B.error("&#91;AJAX&#92; Response: "+n+"\n"+e.responseText)})}}("boolean"===e.type(H.login)?"login":H.login)),S.append(B),d("prompt",H.prompt)){var X,G;l(t,function(t){X=new c(e.extend({name:H.name,prompt:H.prompt,greetings:H.greetings},t)),G=e("<div/>").appendTo(B).cmd({prompt:H.prompt,history:H.history,historyFilter:H.historyFilter,historySize:H.historySize,width:"100%",keydown:z,keypress:H.keypress?function(e){return H.keypress(e,B)}:null,onCommandChange:function(n){if("function"===e.type(H.onCommandChange))try{H.onCommandChange(n,B)}catch(t){throw g(t,"onCommandChange"),t}F()},commands:w}),H.enabled===!0?B.focus(n,!0):B.disable(),e(document).bind("click.terminal",function(n){!e(n.target).parents().hasClass("terminal")&&H.onBlur(B)!==!1&&B.disable()}),B.click(function(){B.focus()}),H.login&&B.token&&!B.token()&&B.login_name&&!B.login_name()?A():C(),B.is(":visible")&&(R=h(B),G.resize(R)),B.oneTime(100,function(){e(window).bind("resize.terminal",function(){if(B.is(":visible")){var e=B.width(),n=B.height();(P!==n||q!==e)&&B.resize()}})}),"function"===e.type(e.fn.init.prototype.mousewheel)&&B.mousewheel(function(e,n){return B.scroll(n>0?-40:40),!1},!0)})}return B.data("terminal",B),B}}(jQuery);
(function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;!function(t,e){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(n){return e(n,t)}):e(t.jQuery,t)}(this,function(n,r){var i,o,l,s,c,u,a,f,h,d,p,v,y,w,g,m;return i=n(r),f=t.call(r,"ontouchstart")>=0,s={horizontal:{},vertical:{}},c=1,a={},u="waypoints-context-id",p="resize.waypoints",v="scroll.waypoints",y=1,w="waypoints-waypoint-ids",g="waypoint",m="waypoints",o=function(){function t(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+c++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},this.element[u]=this.id,a[this.id]=this,t.bind(v,function(){var t;return e.didScroll||f?void 0:(e.didScroll=!0,t=function(){return e.doScroll(),e.didScroll=!1},r.setTimeout(t,n[m].settings.scrollThrottle))}),t.bind(p,function(){var t;return e.didResize?void 0:(e.didResize=!0,t=function(){return n[m]("refresh"),e.didResize=!1},r.setTimeout(t,n[m].settings.resizeThrottle))})}return t.prototype.doScroll=function(){var t,e=this;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!f||t.vertical.oldScroll&&t.vertical.newScroll||n[m]("refresh"),n.each(t,function(t,r){var i,o,l;return l=[],o=r.newScroll>r.oldScroll,i=o?r.forward:r.backward,n.each(e.waypoints[t],function(t,e){var n,i;return r.oldScroll<(n=e.offset)&&n<=r.newScroll?l.push(e):r.newScroll<(i=e.offset)&&i<=r.oldScroll?l.push(e):void 0}),l.sort(function(t,e){return t.offset-e.offset}),o||l.reverse(),n.each(l,function(t,e){return e.options.continuous||t===l.length-1?e.trigger([i]):void 0})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var t,e,r,i=this;return r=n.isWindow(this.element),e=this.$element.offset(),this.doScroll(),t={horizontal:{contextOffset:r?0:e.left,contextScroll:r?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:r?0:e.top,contextScroll:r?0:this.oldScroll.y,contextDimension:r?n[m]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},n.each(t,function(t,e){return n.each(i.waypoints[t],function(t,r){var i,o,l,s,c;return i=r.options.offset,l=r.offset,o=n.isWindow(r.element)?0:r.$element.offset()[e.offsetProp],n.isFunction(i)?i=i.apply(r.element):"string"==typeof i&&(i=parseFloat(i),r.options.offset.indexOf("%")>-1&&(i=Math.ceil(e.contextDimension*i/100))),r.offset=o-e.contextOffset+e.contextScroll-i,r.options.onlyOnScroll&&null!=l||!r.enabled?void 0:null!==l&&l<(s=e.oldScroll)&&s<=r.offset?r.trigger([e.backward]):null!==l&&l>(c=e.oldScroll)&&c>=r.offset?r.trigger([e.forward]):null===l&&e.oldScroll>=r.offset?r.trigger([e.forward]):void 0})})},t.prototype.checkEmpty=function(){return n.isEmptyObject(this.waypoints.horizontal)&&n.isEmptyObject(this.waypoints.vertical)?(this.$element.unbind([p,v].join(" ")),delete a[this.id]):void 0},t}(),l=function(){function t(t,e,r){var i,o;r=n.extend({},n.fn[g].defaults,r),"bottom-in-view"===r.offset&&(r.offset=function(){var t;return t=n[m]("viewportHeight"),n.isWindow(e.element)||(t=e.$element.height()),t-n(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=r.horizontal?"horizontal":"vertical",this.callback=r.handler,this.context=e,this.enabled=r.enabled,this.id="waypoints"+y++,this.offset=null,this.options=r,e.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,i=null!=(o=this.element[w])?o:[],i.push(this.id),this.element[w]=i}return t.prototype.trigger=function(t){return this.enabled?(null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0):void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var e,r;return(r=t[w])?(e=n.extend({},s.horizontal,s.vertical),n.map(r,function(t){return e[t]})):[]},t}(),d={init:function(t,e){var r;return null==e&&(e={}),null==(r=e.handler)&&(e.handler=t),this.each(function(){var t,r,i,s;return t=n(this),i=null!=(s=e.context)?s:n.fn[g].defaults.context,n.isWindow(i)||(i=t.closest(i)),i=n(i),r=a[i[0][u]],r||(r=new o(i)),new l(t,r,e)}),n[m]("refresh"),this},disable:function(){return d._invoke.call(this,"disable")},enable:function(){return d._invoke.call(this,"enable")},destroy:function(){return d._invoke.call(this,"destroy")},prev:function(t,e){return d._traverse.call(this,t,e,function(t,e,n){return e>0?t.push(n[e-1]):void 0})},next:function(t,e){return d._traverse.call(this,t,e,function(t,e,n){return e<n.length-1?t.push(n[e+1]):void 0})},_traverse:function(t,e,i){var o,l;return null==t&&(t="vertical"),null==e&&(e=r),l=h.aggregate(e),o=[],this.each(function(){var e;return e=n.inArray(this,l[t]),i(o,e,l[t])}),this.pushStack(o)},_invoke:function(t){return this.each(function(){var e;return e=l.getWaypointsByElement(this),n.each(e,function(e,n){return n[t](),!0})}),this}},n.fn[g]=function(){var t,r;return r=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],d[r]?d[r].apply(this,t):n.isFunction(r)?d.init.apply(this,arguments):n.isPlainObject(r)?d.init.apply(this,[null,r]):n.error(r?"The "+r+" method does not exist in jQuery Waypoints.":"jQuery Waypoints needs a callback function or handler option.")},n.fn[g].defaults={context:r,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},h={refresh:function(){return n.each(a,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=r.innerHeight)?t:i.height()},aggregate:function(t){var e,r,i;return e=s,t&&(e=null!=(i=a[n(t)[0][u]])?i.waypoints:void 0),e?(r={horizontal:[],vertical:[]},n.each(r,function(t,i){return n.each(e[t],function(t,e){return i.push(e)}),i.sort(function(t,e){return t.offset-e.offset}),r[t]=n.map(i,function(t){return t.element}),r[t]=n.unique(r[t])}),r):[]},above:function(t){return null==t&&(t=r),h._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return null==t&&(t=r),h._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return null==t&&(t=r),h._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return null==t&&(t=r),h._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return h._invoke("enable")},disable:function(){return h._invoke("disable")},destroy:function(){return h._invoke("destroy")},extendFn:function(t,e){return d[t]=e},_invoke:function(t){var e;return e=n.extend({},s.vertical,s.horizontal),n.each(e,function(e,n){return n[t](),!0})},_filter:function(t,e,r){var i,o;return(i=a[n(t)[0][u]])?(o=[],n.each(i.waypoints[e],function(t,e){return r(i,e)?o.push(e):void 0}),o.sort(function(t,e){return t.offset-e.offset}),n.map(o,function(t){return t.element})):[]}},n[m]=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],h[n]?h[n].apply(null,t):h.aggregate.call(null,n)},n[m].settings={resizeThrottle:100,scrollThrottle:30},i.load(function(){return n[m]("refresh")})})}).call(this);
